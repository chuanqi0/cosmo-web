{% extends 'base.mobile.html.twig' %}

{% block title %}全国婚礼作品设计大赛{% endblock %}

{% block body %}
    <div class="fe-works" ng-controller="WorksController" ng-init="getCasusList()">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xs-12 m-p0">
                    <img class="m-width" src="http://cosmolove.image.alimmdn.com/cbwa/common/works.jpg" />
                </div>
            </div>
            <div class="row m-m-t-6 m-p-6">
                <div class="col-xs-6 casus-cell" ng-repeat="casus in casusList track by $index">
                    <div class="cell-top" ng-click="jumpToDetail($index)">
                        <img class="m-width" ng-src="{[{ casus.cover }]}@400w_300h_1e_1c" />
                        <img class="m-width cover-shade" src="{{ asset('img/fantastic/info/cover_cell.png') }}" />
                        <div class="cover-text" ng-show="casus.totalFee == 0">
                            <div style="float:left">发布者:&nbsp;{[{ casus.name }]}</div>
                            <div style="float:right">{[{ casus.voteNumber }]}票</div>
                        </div>
                        <div class="cover-text" ng-show="casus.totalFee != 0">
                            <div style="float:left">策划师:&nbsp;{[{ casus.name }]}</div>
                            <div style="float:right">{[{ casus.voteNumber }]}票</div>
                        </div>
                    </div>
                    <div class="cell-bottom" ng-click="jumpToDetail($index)">
                        <div class="cell-title">{[{ casus.title }]}</div>
                        <div class="cell-desc">{[{ getShortText(casus.description, 27) }]}</div>
                    </div>
                    <div class="cell-vote">
                        <div class="m-btn vote" ng-click="vote($index)">投票</div>
                    </div>
                </div>
            </div>
            <div class="row load-more" ng-show="showMore == true">
                <div class="col-xs-4 col-xs-offset-4 m-p0">
                    <div class="m-btn code" ng-click="getCasusList()"><span class="glyphicon glyphicon-plus"></span><span>&nbsp;点击加载更多</span></div>
                </div>
            </div>
            <div class="row rules">
                <div class="col-xs-12 m-center">
                    <img class="rules-img" src="http://cosmolove.image.alimmdn.com/cbwa/common/rules.png" />
                </div>
                <div class="col-xs-12">
                    <p>
                        1. 最终获奖结果将以<br />
                        网络投票结果和大赛专家评委组投票选出。<br /><br />
                        2. 每人每天可以为每个作品投票3次，<br />
                        不可重复投票，禁止刷票。
                    </p>
                </div>
                <div class="col-xs-8 col-xs-offset-2">
                    <div class="m-btn about" ng-click="about()">关于大赛</div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 m-p0">
                    <img class="m-width" src="http://cosmolove.image.alimmdn.com/cbwa/common/works_bottom.jpg" />
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ asset('js/mobile/cbwa.works.js?v=3') }}"></script>
{% endblock %}